<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2487.2">
  <style type="text/css">
    body {background-color: #f6f7f9}
    span.s1 {font-kerning: none}
  </style>
</head>
<body>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1">&lt;!DOCTYPE html&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1">&lt;html lang="ja"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1">&lt;head&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">    </span>&lt;title&gt;AIパーソナルスタイリスト システム概要&lt;/title&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">    </span>&lt;style&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">        </span>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&amp;display=swap');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">        </span>body { font-family: 'Inter', sans-serif; background-color: #F8F9FA; color: #212529; scroll-behavior: smooth; }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">        </span>.section-card { background-color: #FFFFFF; border: 1px solid #dee2e6; border-radius: 16px; padding: 1.5rem; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.07); transition: all 0.3s ease; }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">        </span>@media (min-width: 768px) { .section-card { padding: 2.5rem; } }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">        </span>.section-card:hover { transform: translateY(-5px); box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1); }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">        </span>.nav-link { transition: all 0.2s ease; cursor: pointer; position: relative; font-weight: 500; }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">        </span>.nav-link:after { content: ''; position: absolute; width: 0; height: 2px; bottom: -6px; left: 50%; transform: translateX(-50%); background-color: #F59E0B; transition: width 0.3s ease; }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">        </span>.nav-link.active, .nav-link:hover { color: #F59E0B; }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">        </span>.nav-link.active:after, .nav-link:hover:after { width: 60%; }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">        </span>.main-btn { background-image: linear-gradient(to right, #FBBF24, #F59E0B); transition: all 0.3s ease; transform: scale(1); }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">        </span>.main-btn:hover { box-shadow: 0 10px 20px -10px #F59E0B; transform: scale(1.05) translateY(-2px); }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">        </span>h1, h2, h3, h4 { letter-spacing: -0.02em; }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">        </span>h2 { font-weight: 800; }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1">&lt;/head&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1">&lt;body class="antialiased"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">    </span>&lt;header class="sticky top-0 bg-white/80 backdrop-blur-lg z-10 shadow-sm"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">        </span>&lt;nav class="container mx-auto px-4 sm:px-6 lg:px-8"&gt;&lt;div class="flex items-center justify-between h-16"&gt;&lt;div class="flex-shrink-0"&gt;&lt;h1 class="text-lg sm:text-xl font-bold text-gray-800"&gt;AI Personal Stylist&lt;/h1&gt;&lt;/div&gt;&lt;div class="hidden md:block"&gt;&lt;div class="ml-10 flex items-baseline space-x-6"&gt;&lt;a id="nav-about" class="nav-link text-gray-600 px-3 py-2 rounded-md text-sm"&gt;概要&lt;/a&gt;&lt;a id="nav-analyzer" class="nav-link text-gray-600 px-3 py-2 rounded-md text-sm"&gt;✨ AI分析 ✨&lt;/a&gt;&lt;a id="nav-gemini-feature" class="nav-link text-gray-600 px-3 py-2 rounded-md text-sm"&gt;✨ AI提案 ✨&lt;/a&gt;&lt;a id="nav-features" class="nav-link text-gray-600 px-3 py-2 rounded-md text-sm"&gt;主要機能&lt;/a&gt;&lt;a id="nav-tech" class="nav-link text-gray-600 px-3 py-2 rounded-md text-sm"&gt;System&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/nav&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/header&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">    </span>&lt;main class="container mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-20"&gt;&lt;div class="space-y-16 md:space-y-20"&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">        </span>&lt;section id="about" class="scroll-mt-20"&gt;&lt;div class="text-center mb-12 md:mb-16"&gt;&lt;h2 class="text-3xl sm:text-4xl md:text-5xl font-extrabold text-gray-900 tracking-tight"&gt;あなただけのAIスタイリストを&lt;/h2&gt;&lt;p class="mt-4 sm:mt-6 max-w-2xl mx-auto text-base sm:text-lg text-gray-600"&gt;最新のAI技術を駆使し、ユーザー一人ひとりの好みやTPOに合わせたファッションコーディネートを提案する、次世代チャット機能の設計コンセプトをご紹介します。&lt;/p&gt;&lt;/div&gt;&lt;/section&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">        </span>&lt;section id="analyzer" class="scroll-mt-20"&gt;&lt;div class="text-center mb-12 md:mb-16"&gt;&lt;h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-gray-800"&gt;✨ AIスタイルアナライザー ✨&lt;/h2&gt;&lt;p class="mt-4 max-w-xl mx-auto text-sm sm:text-base text-gray-500"&gt;今日のコーディネート写真をアップロードして、プロのスタイリストから客観的なアドバイスをもらいましょう。&lt;/p&gt;&lt;/div&gt;&lt;div class="section-card max-w-2xl mx-auto"&gt;&lt;div&gt;&lt;label for="analyzer-image-upload" class="block text-sm font-medium text-gray-700 mb-2"&gt;分析したい画像をアップロード&lt;/label&gt;&lt;input type="file" id="analyzer-image-upload" accept="image/*" class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 cursor-pointer"&gt;&lt;img id="analyzer-image-preview" src="#" alt="Analyzer Image Preview" class="mt-4 hidden w-full rounded-lg object-cover max-h-96"&gt;&lt;/div&gt;&lt;div class="flex items-center justify-center mt-6"&gt;&lt;button id="analyze-btn" class="main-btn flex items-center justify-center px-6 py-3 border border-transparent text-sm sm:text-base font-medium rounded-full shadow-sm text-white"&gt;&lt;span id="analyze-btn-text"&gt;✨ スタイルを分析する ✨&lt;/span&gt;&lt;div id="analyzer-loading-spinner" class="hidden w-5 h-5 border-2 border-white border-t-2 border-t-transparent rounded-full animate-spin"&gt;&lt;/div&gt;&lt;/button&gt;&lt;/div&gt;&lt;div id="analyzer-result-container" class="mt-8 p-4 sm:p-6 bg-gray-50 rounded-lg hidden"&gt;&lt;p class="text-base sm:text-lg font-medium text-gray-800 mb-2"&gt;AIからの分析結果:&lt;/p&gt;&lt;p id="analyzer-response" class="text-sm sm:text-base text-gray-700 whitespace-pre-wrap leading-relaxed"&gt;&lt;/p&gt;&lt;/div&gt;&lt;div id="analyzer-error-message" class="hidden mt-4 text-center text-red-600 text-sm"&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">        </span>&lt;section id="gemini-feature" class="scroll-mt-20"&gt;&lt;div class="text-center mb-12 md:mb-16"&gt;&lt;h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-gray-800"&gt;✨AIパーソナルコーディネート提案✨&lt;/h2&gt;&lt;p class="mt-4 max-w-xl mx-auto text-sm sm:text-base text-gray-500"&gt;あなたのなりたいスタイルをAIに伝えてみましょう。AIがあなたのための特別なコーディネートを提案します。&lt;/p&gt;&lt;/div&gt;&lt;div class="section-card max-w-4xl mx-auto"&gt;&lt;div class="grid md:grid-cols-2 gap-6 md:gap-8"&gt;&lt;div&gt;&lt;label for="image-upload" class="block text-sm font-medium text-gray-700 mb-2"&gt;画像アップロード（任意）&lt;/label&gt;&lt;input type="file" id="image-upload" accept="image/*" class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 cursor-pointer"&gt;&lt;img id="image-preview" src="#" alt="Image Preview" class="mt-4 hidden w-full rounded-lg object-cover max-h-64"&gt;&lt;/div&gt;&lt;div&gt;&lt;div class="grid grid-cols-2 gap-4 mb-4"&gt;&lt;div&gt;&lt;label for="user-height" class="block text-sm font-medium text-gray-700 mb-2"&gt;身長 (cm)&lt;/label&gt;&lt;input type="number" id="user-height" class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 text-sm sm:text-base" placeholder="例：170"&gt;&lt;/div&gt;&lt;div&gt;&lt;label for="user-weight" class="block text-sm font-medium text-gray-700 mb-2"&gt;体重 (kg)&lt;/label&gt;&lt;input type="number" id="user-weight" class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 text-sm sm:text-base" placeholder="例：65"&gt;&lt;/div&gt;&lt;/div&gt;&lt;label for="user-prompt" class="block text-sm font-medium text-gray-700 mb-2"&gt;AIへの指示&lt;/label&gt;&lt;textarea id="user-prompt" rows="3" class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 text-sm sm:text-base" placeholder="例：オフィスカジュアルなコーデを提案してください。"&gt;&lt;/textarea&gt;&lt;div class="flex items-center justify-center mt-6"&gt;&lt;button id="generate-btn" class="main-btn flex items-center justify-center px-6 py-3 border border-transparent text-sm sm:text-base font-medium rounded-full shadow-sm text-white"&gt;&lt;span id="btn-text"&gt;✨コーディネートを提案✨&lt;/span&gt;&lt;div id="loading-spinner" class="hidden w-5 h-5 border-2 border-white border-t-2 border-t-transparent rounded-full animate-spin"&gt;&lt;/div&gt;&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div id="result-container" class="mt-8 p-4 sm:p-6 bg-gray-50 rounded-lg hidden"&gt;&lt;p class="text-base sm:text-lg font-medium text-gray-800 mb-2"&gt;AIからの提案:&lt;/p&gt;&lt;p id="gemini-response" class="text-sm sm:text-base text-gray-700 whitespace-pre-wrap leading-relaxed"&gt;&lt;/p&gt;&lt;div class="mt-6 flex flex-col items-center"&gt;&lt;p class="text-base sm:text-lg font-medium text-gray-800 mb-2"&gt;提案コーディネートのイメージ:&lt;/p&gt;&lt;img id="outfit-image-preview" src="#" alt="Generated Outfit" class="rounded-lg shadow-md max-w-full"&gt;&lt;/div&gt;&lt;/div&gt;&lt;div id="error-message" class="hidden mt-4 text-center text-red-600 text-sm"&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">        </span>&lt;section id="features" class="scroll-mt-20"&gt;&lt;div class="text-center mb-12 md:mb-16"&gt;&lt;h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-gray-800"&gt;インタラクティブな主要機能&lt;/h2&gt;&lt;p class="mt-4 max-w-xl mx-auto text-sm sm:text-base text-gray-500"&gt;ユーザーの要望に応えるためのユニークな機能と、その仕組みを図解で解説します。&lt;/p&gt;&lt;/div&gt;&lt;div class="space-y-12"&gt;&lt;div class="section-card"&gt;&lt;h3 class="text-lg sm:text-xl font-semibold mb-2"&gt;機能1：画像からのスタイル学習&lt;/h3&gt;&lt;p class="text-sm sm:text-base text-gray-600 mb-8"&gt;お気に入りの画像をAIに学習させ、あなたの「好き」をコーディネートに反映させる機能です。&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">        </span>&lt;section id="tech" class="scroll-mt-20"&gt;&lt;div class="text-center mb-12 md:mb-16"&gt;&lt;h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-gray-800"&gt;System&lt;/h2&gt;&lt;p class="mt-4 max-w-xl mx-auto text-sm sm:text-base text-gray-500"&gt;高度なパーソナライズを実現するため、3つの主要なAI技術を組み合わせています。&lt;/p&gt;&lt;/div&gt;&lt;div class="grid md:grid-cols-3 gap-6 md:gap-8"&gt;&lt;div class="section-card"&gt;&lt;h3&gt;...&lt;/h3&gt;&lt;/div&gt;&lt;div class="section-card"&gt;&lt;h3&gt;...&lt;/h3&gt;&lt;/div&gt;&lt;div class="section-card"&gt;&lt;h3&gt;...&lt;/h3&gt;&lt;/div&gt;&lt;/div&gt;&lt;/section&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/div&gt;&lt;/main&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">    </span>&lt;footer class="bg-white border-t mt-16 md:mt-20"&gt;&lt;div class="container mx-auto py-8 px-4 sm:px-6 lg:px-8 text-center text-gray-500"&gt;&lt;p class="text-xs sm:text-sm"&gt;&amp;copy; 2025 AI Personal Stylist Project. All Rights Reserved.&lt;/p&gt;&lt;/div&gt;&lt;/footer&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">        </span>document.addEventListener('DOMContentLoaded', () =&gt; {</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>const cloudFunctionUrl = "ここにVercelのFunctionsタブからコピーしたURLを貼り付けてください";</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>// --- DOM Element References ---</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>const analyzerImageUpload = document.getElementById('analyzer-image-upload');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>const analyzerImagePreview = document.getElementById('analyzer-image-preview');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>const analyzeBtn = document.getElementById('analyze-btn');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>const analyzeBtnText = document.getElementById('analyze-btn-text');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>const analyzerLoadingSpinner = document.getElementById('analyzer-loading-spinner');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>const analyzerResultContainer = document.getElementById('analyzer-result-container');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>const analyzerResponse = document.getElementById('analyzer-response');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>const analyzerErrorMessage = document.getElementById('analyzer-error-message');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>const imageUpload = document.getElementById('image-upload');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>const imagePreview = document.getElementById('image-preview');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>const userPrompt = document.getElementById('user-prompt');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>const userHeight = document.getElementById('user-height');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>const userWeight = document.getElementById('user-weight');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>const generateBtn = document.getElementById('generate-btn');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>const btnText = document.getElementById('btn-text');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>const loadingSpinner = document.getElementById('loading-spinner');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>const resultContainer = document.getElementById('result-container');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>const geminiResponse = document.getElementById('gemini-response');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>const outfitImagePreview = document.getElementById('outfit-image-preview');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>const errorMessage = document.getElementById('error-message');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>// --- Utility to convert file to Base64 ---</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>function fileToBase64(file) { return new Promise((resolve, reject) =&gt; { const reader = new FileReader(); reader.onload = () =&gt; resolve(reader.result.split(',')[1]); reader.onerror = error =&gt; reject(error); reader.readAsDataURL(file); }); }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>function previewImage(input, previewElement) { const file = input.files[0]; if (file) { const reader = new FileReader(); reader.onload = (e) =&gt; { previewElement.src = e.target.result; previewElement.classList.remove('hidden'); }; reader.readAsDataURL(file); } else { previewElement.classList.add('hidden'); previewElement.src = '#'; } }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>imageUpload.addEventListener('change', (e) =&gt; previewImage(e.target, imagePreview));</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>analyzerImageUpload.addEventListener('change', (e) =&gt; previewImage(e.target, analyzerImagePreview));</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>// --- Main API Call Functions ---</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>analyzeBtn.addEventListener('click', async () =&gt; {</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                </span>const file = analyzerImageUpload.files[0];</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                </span>if (!file) { analyzerErrorMessage.textContent = '分析する画像をアップロードしてください。'; analyzerErrorMessage.classList.remove('hidden'); return; }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                </span>if (!cloudFunctionUrl || !cloudFunctionUrl.startsWith('http')) { analyzerErrorMessage.textContent = 'バックエンドURLが正しく設定されていません。'; analyzerErrorMessage.classList.remove('hidden'); return; }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                </span>analyzerErrorMessage.classList.add('hidden'); analyzerResultContainer.classList.add('hidden'); analyzeBtnText.classList.add('hidden'); analyzerLoadingSpinner.classList.remove('hidden'); analyzeBtn.disabled = true;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                </span>try {</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                    </span>const base64Image = await fileToBase64(file);</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                    </span>const requestPayload = { feature: 'analyzer', image: { mimeType: file.type, data: base64Image } };</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                    </span>const response = await fetch(cloudFunctionUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(requestPayload) });</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                    </span>if (!response.ok) { const errorBody = await response.json(); throw new Error(errorBody.error || 'バックエンドエラー'); }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                    </span>const result = await response.json();</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                    </span>if (!result.text) throw new Error('AIからのテキスト応答がありません。');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                    </span>analyzerResponse.textContent = result.text; analyzerResultContainer.classList.remove('hidden');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                </span>} catch (error) { console.error('分析エラー:', error); analyzerErrorMessage.textContent = `エラー: ${error.message}`; analyzerErrorMessage.classList.remove('hidden');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                </span>} finally { analyzeBtnText.classList.remove('hidden'); analyzerLoadingSpinner.classList.add('hidden'); analyzeBtn.disabled = false; }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>});</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>generateBtn.addEventListener('click', async () =&gt; {</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                </span>const prompt = userPrompt.value;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                </span>if (!prompt.trim()) { errorMessage.textContent = 'AIへの指示を入力してください。'; errorMessage.classList.remove('hidden'); return; }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                </span>if (!cloudFunctionUrl || !cloudFunctionUrl.startsWith('http')) { errorMessage.textContent = 'バックエンドURLが正しく設定されていません。'; errorMessage.classList.remove('hidden'); return; }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                </span>errorMessage.classList.add('hidden'); resultContainer.classList.add('hidden'); btnText.classList.add('hidden'); loadingSpinner.classList.remove('hidden'); generateBtn.disabled = true;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                </span>try {</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                    </span>let fullPrompt = prompt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                    </span>if (userHeight.value) fullPrompt += `\n身長: ${userHeight.value}cm`;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                    </span>if (userWeight.value) fullPrompt += `\n体重: ${userWeight.value}kg`;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                    </span>const requestPayload = { feature: 'generator', prompt: fullPrompt, isMobile: window.innerWidth &lt; 768 };</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                    </span>const file = imageUpload.files[0];</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                    </span>if (file) { const base64Image = await fileToBase64(file); requestPayload.image = { mimeType: file.type, data: base64Image }; }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                    </span>const response = await fetch(cloudFunctionUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(requestPayload) });</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                    </span>if (!response.ok) { const errorBody = await response.json(); throw new Error(errorBody.error || 'バックエンドエラー'); }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                    </span>const result = await response.json();</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                    </span>if (result.base64Data) { geminiResponse.textContent = result.text || ""; outfitImagePreview.src = `data:image/png;base64,${result.base64Data}`; resultContainer.classList.remove('hidden');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                    </span>} else { throw new Error('AIからの応答が不完全でした。'); }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                </span>} catch (error) { console.error('提案エラー:', error); errorMessage.textContent = `エラー: ${error.message}`; errorMessage.classList.remove('hidden');</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">                </span>} finally { btnText.classList.remove('hidden'); loadingSpinner.classList.add('hidden'); generateBtn.disabled = false; }</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">            </span>});</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">        </span>});</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1">&lt;/body&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f"><span class="s1">&lt;/html&gt;</span></h1>
<h1 style="margin: 0.0px 0.0px 14.9px 0.0px; color: #191c1f; -webkit-text-stroke: #191c1f; min-height: 20.0px"><span class="s1"></span><br></h1>
</body>
</html>
